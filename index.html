<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>WorldBuilding</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <main>
        <div class = "post" id = "HeaderBox" >
          <h1>WorldBuilding</h1> 
          <div id = "HeaderTriangle" ></div>
        </div>
        <div class= "post">
          <div id="BackgroundRectangle"></div>
        </div>
        <div class="Body">
          <div id = "content">
            <h2>Top-Down</h2>
            <table id="table">
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Characters</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Technology</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Worlds and Continents</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Climates</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>History</p>
                </th>
              </tr>
            </table>
            <h2>Bottom-Up</h2>
            <table id="table">
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Local Geography</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Culture</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Social Structure</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Government</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Politics</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Commerce</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>History</p>
                </th>
              </tr>
            </table>
            <button name="file" id="file" onclick="newHumanoidCharacter()">Humanoid</button>
            <button name="file" id="file" >Mythic</button>
            <button name="file" id="file" >Alien</button>
            <button name="file" id="file" >Creature</button>
            <div id = 'CharacterSheet'>
              <h3>name</h3>
              <div id='name'>Name-Placeholder</div>
              <h3>species</h3>
              <div id='species'>Species-Placeholder</div>
              <h3>type</h3>
              <div id='type'>Type-Placeholder</div>
              <h3>genetically mutated?</h3>
              <div id='mutated'>Boolean-Placeholder</div>
              <h3>natural-born powers?</h3>
              <div id='natural'>Boolean-Placeholder</div>
              <h3>superpowers</h3>
              <div id='superpowers'>Superpower-Placeholder</div>
              <h3>superpower 2?</h3>
              <div id='superpower2'>Superpower-Placeholder</div>
              <h3>age</h3>
              <div id='age'>Age-Placeholder</div>
              <h3>sex</h3>
              <div id='sex'>Sex-Placeholder</div>
              <h3>sexuality</h3>
              <div id='sexuality'>Sexuality-Placeholder</div>
              <h3>Experiances</h3>
              <div id='experiances'>Skills-Placeholder</div>
              <h3>personalities</h3>
              <div id='personalities'>Personality-Placeholder</div>
              <h3>ideologies</h3>
              <div id='ideologies'>Ideology-Placeholder</div>
            </div>
          </div>  
        </div>
    </main>
    <style>
      #CharacterSheet{
          display: none;
      }
    </style>
    <script>
      
      function loadFile(filePath) {
        var result = null;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", filePath, false);
        xmlhttp.send();
        if (xmlhttp.status==200) {
          result = xmlhttp.responseText;
        }
        return result;
        // const reader = new FileReader();
        // if (input) {
        //   return reader.readAsText(input);
        // }
      }

      function randomLine(string){
        var fullFile = loadFile(string);
        console.log(fullFile);
        var lines = fullFile.split('\n');
        var line = Math.floor(Math.random() * lines.length);
        return lines[line];
      }

      function newHumanoidCharacter(){
        
        document.getElementById("CharacterSheet").style.display="block";
        //sets 100% var
        let maxChance = 100;
        let lowChance = 70;
        let lowerChance = 80;
        let extremelyLowChance = 90;
        //name
        document.getElementById("name").innerText = randomLine("files/characterCreationFiles/catagories/humanoid/names.txt");
        //type
        document.getElementById("type").innerText = randomLine("files/characterCreationFiles/catagories/humanoid/types.txt");
        //mutated
        var mutatedChance = Math.random() * maxChance;
        if(mutatedChance>extremelyLowChance)
        {
            document.getElementById("mutated").innerText = "true";
        }
        else{
          document.getElementById("mutated").innerText = "false";
        }
        //superpower
        let hasSuperpowers = false;
        var superChance = Math.random() * maxChance;
        if(superChance>lowerChance){
          document.getElementById("superpowers").innerText = randomLine("files/characterCreationFiles/superpowers.txt");
          hasSuperpowers = true;
        }
        //superpower2
        if(hasSuperpowers){
          superChance2 = Math.random() * maxChance;
          if(superChance2>lowerChance){
            document.getElementById("superpower2").innerText = randomLine("files/characterCreationFiles/superpowers.txt");
          }
        }
        //age
        document.getElementById("age").innerText = Math.random() * Number(loadFile("files/characterCreationFiles/catagories/humanoid/ageRange.txt"));
        //sex
        document.getElementById("sex").innerText = randomLine("files/characterCreationFiles/catagories/humanoid/sexes.txt");
        //sexualities
        var sexualityChance = Math.random() * maxChance;
        if(sexualityChance>lowChance){
          document.getElementById("sex").innerText = "Heterosexual";
        }
        else{
          document.getElementById("sexuality").innerText = randomLine("files/characterCreationFiles/catagories/humanoid/sexualities.txt");
        }
        //skills
        document.getElementById("experiances").innerText = newSetOfThreeElements(newExperiance(),newExperiance(),newExperiance());
        //personalities
        document.getElementById("personalities").innerText = newSetOfThreeElements(newPersonality(),newPersonality(),newPersonality());
        //ideologies
        document.getElementById("ideologies").innerText = randomLine("files/characterCreationFiles/catagories/humanoid/ideologies.txt");
      }

      function newSetOfThreeElements(elementOne,elementTwo,elementThree){
        let traitList = Array();
        traitList.push(elementOne);
        traitList.push(elementTwo);
        traitList.push(elementThree);
        var string = "";
        traitList.forEach(function(element){
            string += element;
        });
        return string;
      }

      function newExperiance(){
        let maxChance = 100;
        var chance = Math.random() * maxChance;
        if(chance>30){
          return randomLine("files/characterCreationFiles/experiance.txt")
        }
        else{
          return "empty\n";
        }
      }

      function newPersonality(){
        let maxChance = 100;
        var chance = Math.random() * maxChance;
        switch(true){
          case chance<18:
            var path = "files/characterCreationFiles/personalityTraits/Neutral.txt";
            break;
          case chance<54:
            var path = "files/characterCreationFiles/personalityTraits/Positive.txt";
            break;
          case 53<chance:
            var path = "files/characterCreationFiles/personalityTraits/Negative.txt";
            break;
        }
          return randomLine(path);
      }

      

      
    </script>
  </body>
</html>