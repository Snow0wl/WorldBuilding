<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>WorldBuilding</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <main>
        <div class = "post" id = "HeaderBox" >
          <h1>WorldBuilding</h1> 
          <div id = "HeaderTriangle" ></div>
        </div>
        <div class= "post">
          <div id="BackgroundRectangle"></div>
        </div>
        <div class="Body">
          <div id = "content">
            <h2>Top-Down</h2>
            <table id="table">
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Characters</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Technology</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Worlds and Continents</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Climates</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>History</p>
                </th>
              </tr>
            </table>
            <h2>Bottom-Up</h2>
            <table id="table">
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Local Geography</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Culture</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Social Structure</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Government</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Politics</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Commerce</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>History</p>
                </th>
              </tr>
            </table>
            <input type="button" name="file" id="file" onclick="newCharacter()">
            <div class = 'Character'>
              <h3>name</h3>
              <div id='name'></div>
              <h3>personalities</h3>
              <div id='personalities'>hi</div>
            </div>
          </div>  
        </div>
    </main>
    <script>
      function loadFile(filePath) {
        var result = null;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", filePath, false);
        xmlhttp.send();
        if (xmlhttp.status==200) {
          result = xmlhttp.responseText;
        }
        return result;
      }
      function newCharacter(){
        
        newName();
        newPersonalitites();
      }
      function newPersonalitites(){
        let numberOfTraits = 3;
        let traitList = Array();
        for(let i=0;i<numberOfTraits;i++){
          var personality = newPersonality();
          
          traitList.push(personality);
        }
        var string = "";
        traitList.forEach(function(element){
            string += element;
        });
        document.getElementById("personalities").innerText = string;
      }
      function newPersonality(){
        let maxChance = 100;
        var chance = Math.random() * maxChance;
        switch(true){
          case chance<18:
            var fullFile = loadFile("files/personalityTraits/Neutral.txt");
            break;
          case chance<54:
            var fullFile = loadFile("files/personalityTraits/Positive.txt");
            break;
          case 53<chance:
            var fullFile = loadFile("files/personalityTraits/Negative.txt");
            break;
        }
        var lines = fullFile.split('\n');
        var line = Math.floor(Math.random() * lines.length);
        return lines[line];
      }

      function newName(){
        var fullFile = loadFile("files/humanoidNames.txt");
        var lines = fullFile.split('\n');
        var line = Math.floor(Math.random() * lines.length);
        document.getElementById("name").innerText = lines[line];
      }

      
    </script>
  </body>
</html>