<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>WorldBuilding</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <main>
        <div class = "post" id = "HeaderBox" >
          <h1>WorldBuilding</h1> 
          <div id = "HeaderTriangle" ></div>
        </div>
        <div class= "post">
          <div id="BackgroundRectangle"></div>
        </div>
        <div class="Body">
          <div id = "content">
            <h2>Top-Down</h2>
            <table id="table">
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Characters</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Technology</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Worlds and Continents</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Climates</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>History</p>
                </th>
              </tr>
            </table>
            <h2>Bottom-Up</h2>
            <table id="table">
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Local Geography</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Culture</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Social Structure</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Government</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>Politics</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Commerce</p>
                </th>
                <th>
                  <p>Right Side</p>
                </th>
              </tr>
              <tr>
                <th>
                  <p>Left Side</p>
                </th>
                <th>
                  <p>History</p>
                </th>
              </tr>
            </table>
            <button name="file" id="file" onclick="newHumanoidCharacter()">Humanoid</button>
            <button name="file" id="file" >Mythic</button>
            <button name="file" id="file" >Creature</button>
            <div class = 'Character'>
              <h3>name</h3>
              <div id='name'>Name-Placeholder</div>
              <h3>species</h3>
              <div id='species'>Species-Placeholder</div>
              <h3>type</h3>
              <div id='type'>Type-Placeholder</div>
              <h3>genetically mutated?</h3>
              <div id='mutated'>Boolean-Placeholder</div>
              <h3>natural-born powers?</h3>
              <div id='natural'>Boolean-Placeholder</div>
              <h3>superpowers</h3>
              <div id='superpowers'>Superpower-Placeholder</div>
              <h3>superpower 2?</h3>
              <div id='superpower2'>Superpower-Placeholder</div>
              <h3>age</h3>
              <div id='age'>Age-Placeholder</div>
              <h3>sex</h3>
              <div id='sex'>Sex-Placeholder</div>
              <h3>sexuality</h3>
              <div id='sexuality'>Sexuality-Placeholder</div>
              <h3>skills</h3>
              <div id='skills'>Skills-Placeholder</div>
              <h3>personalities</h3>
              <div id='personalities'>Personality-Placeholder</div>
              <h3>ideologies</h3>
              <div id='ideologies'>Ideology-Placeholder</div>
            </div>
          </div>  
        </div>
    </main>
    <script>
      function loadFile(filePath) {
        var result = null;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", filePath, false);
        xmlhttp.send();
        if (xmlhttp.status==200) {
          result = xmlhttp.responseText;
        }
        return result;
      }
      function newHumanoidCharacter(){
        
        document.getElementById("name").innerText = randomLine("files/characterCreationFiles/catagories/humanoid/names.txt");
        let hasSuperpowers = false;
        let maxChance = 100;
        var superChance = Math.random() * maxChance;
        if(superChance>80){
          document.getElementById("superpowers").innerText = randomLine("files/characterCreationFiles/superpowers.txt");
          hasSuperpowers = true;
        }
        if(hasSuperpowers){
          superChance2 = Math.random() * maxChance;
          if(superChance2>80){
            document.getElementById("superpower2").innerText = randomLine("files/characterCreationFiles/superpowers.txt");
          }
        }
        newPersonalitites();
      }
      function newPersonalitites(){
        let numberOfTraits = 3;
        let traitList = Array();
        for(let i=0;i<numberOfTraits;i++){
          var personality = newPersonality();
          
          traitList.push(personality);
        }
        var string = "";
        traitList.forEach(function(element){
            string += element;
        });
        document.getElementById("personalities").innerText = string;
      }
      function newPersonality(){
        let maxChance = 100;
        var chance = Math.random() * maxChance;
        switch(true){
          case chance<18:
            var fullFile = loadFile("files/characterCreationFiles/personalityTraits/Neutral.txt");
            var path = "files/characterCreationFiles/personalityTraits/Neutral.txt";
            break;
          case chance<54:
            
            var path = "files/characterCreationFiles/personalityTraits/Positive.txt";
            break;
          case 53<chance:
            
            var path = "files/characterCreationFiles/personalityTraits/Negative.txt";
            break;
        }
          return randomLine(path);
      }

      function randomLine(string){
        var fullFile = loadFile(string);
        var lines = fullFile.split('\n');
        var line = Math.floor(Math.random() * lines.length);
        return lines[line];
      }

      
    </script>
  </body>
</html>